{% extends 'base.html' %}
{% load static %}

{% block content %}
{% include 'navbar.html' %}

<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Arial', sans-serif;
        background-color: #fdf2f8;
        background-image: 
            linear-gradient(45deg, #fbcfe8 25%, transparent 25%),
            linear-gradient(-45deg, #fbcfe8 25%, transparent 25%),
            linear-gradient(45deg, transparent 75%, #fbcfe8 75%),
            linear-gradient(-45deg, transparent 75%, #fbcfe8 75%);
        background-size: 20px 20px;
        background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
        min-height: 100vh;
    }

    .container-box {
        background-color: white;
        border: 1px solid #ccc;
        padding: 15px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        margin-bottom: 15px;
        width: 100%;
        max-width: 800px;
    }

    .title-box {
        background-color: white;
        border: 1px solid #ccc;
        padding: 20px;
        border-radius: 8px;
        text-align: center;
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        width: 100%;
        max-width: 800px;
    }

    .profile-info {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
    }

    .profile-info-item {
        margin-bottom: 15px;
    }

    .profile-info-item strong {
        display: block;
        margin-bottom: 5px;
    }

    @media (max-width: 768px) {
        .title-box, .container-box {
            margin-left: auto;
            margin-right: auto;
            padding: 10px;
        }
    }
</style>

<div class="container d-flex flex-column align-items-center">
    <div class="title-box">
        <h1><i class="fas fa-user me-2"></i>Perfil del Usuario</h1>
    </div>
    <div class="container-box">
        <div class="profile-info">
            <div class="profile-info-item">
                <strong>DNI:</strong>
                <p>{{ empleado.dni }}</p>
            </div>
            <div class="profile-info-item">
                <strong>Nombre:</strong>
                <p>{{ empleado.nombre }}</p>
            </div>
            <div class="profile-info-item">
                <strong>Apellido:</strong>
                <p>{{ empleado.apellido }}</p>
            </div>
            <div class="profile-info-item">
                <strong>Edad:</strong>
                <p>{{ empleado.edad }}</p>
            </div>
            <div class="profile-info-item">
                <strong>Teléfono:</strong>
                <p>{{ empleado.telefono }}</p>
            </div>
            <div class="profile-info-item">
                <strong>Correo:</strong>
                <p>{{ empleado.correo }}</p>
            </div>
            <div class="profile-info-item">
                <strong>Dirección:</strong>
                <p>{{ empleado.direccion }}</p>
            </div>
            <div class="profile-info-item">
                <strong>Nombre de Usuario:</strong>
                <p>{{ empleado.id_user.username }}</p>
            </div>
        </div>
        <div class="text-center mt-4">
            <button type="button" class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#editModal" data-user-id="{{ empleado.id_user.id }}">
                Editar perfil
            </button>
        </div>
    </div>
</div>

<div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editModalLabel">Editar Usuario</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div id="modalEditFormContent" class="mb-3"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<script>
    var editModal = document.getElementById('editModal');
    editModal.addEventListener('show.bs.modal', function (event) {
        var button = event.relatedTarget;
        var userId = button.getAttribute('data-user-id');
        
        fetch("{% url 'edit_user' 0 %}".replace('0', userId))
            .then(response => response.text())
            .then(html => {
                document.getElementById('modalEditFormContent').innerHTML = html;
            })
            .catch(err => {
                console.error("Error al cargar el formulario de edición: ", err);
            });
    });
</script>

{% endblock content %}
